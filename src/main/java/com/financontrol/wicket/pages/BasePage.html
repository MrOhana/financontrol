<!DOCTYPE html>
<html xmlns:wicket="http://wicket.apache.org">

<head>
  <meta charset="utf-8" />
  <title>FinanControl</title>
  <!-- Materialize CSS -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    body {
      display: flex;
      min-height: 100vh;
      flex-direction: column;
      background-color: #f5f5f5;
    }

    main {
      flex: 1 0 auto;
      padding-top: 20px;
    }

    /* Wicket Feedback Panel Styles for Materialize */
    .feedbackPanelERROR {
      color: #d32f2f;
      list-style-type: none;
    }

    .feedbackPanelINFO {
      color: #388e3c;
      list-style-type: none;
    }

    /* Custom Toast Positioning */
    #toast-container {
      top: 80px !important;
      /* Below navbar */
      right: auto !important;
      bottom: auto !important;
      left: 50% !important;
      transform: translateX(-50%);
      min-width: 300px;
      /* Ensure decent width */
      display: flex;
      justify-content: center;
    }

    .toast {
      border-radius: 25px;
      /* More pill-like M3 style */
      justify-content: center;
    }

    /* Utility for consistent form spacing */
    .mb-3 {
      margin-bottom: 2rem !important;
    }

    /* Fix for Select Labels in Materialize */
    .input-field>label {
      pointer-events: none;
      /* Prevent clicking on label when field is active */
    }
  </style>
  <!-- Materialize JavaScript -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>

  <!-- jQuery and MaskMoney Plugin -->
  <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-maskmoney/3.0.2/jquery.maskMoney.min.js"></script>

  <script>
    document.addEventListener('DOMContentLoaded', function () {
      // 1. Initialize Materialize components
      M.AutoInit();

      // 2. Initialize Money Mask
      $('.money').maskMoney({
        prefix: 'R$ ',
        allowNegative: false,
        thousands: '.',
        decimal: ',',
        affixesStay: true
      });

      // 3. Apply mask to existing values
      $('.money').maskMoney('mask');

      // 4. Force update of text fields tags (Labels) to prevent overlap
      // This is crucial when values are set via JS or Wicket
      setTimeout(function () {
        M.updateTextFields();
      }, 100); // Small delay to ensure everything is rendered
    });
  </script>
</head>

<body>

  <nav class="indigo darken-3">
    <div class="nav-wrapper container">
      <a href="#" class="brand-logo"><i class="material-icons left"
          style="margin-right: 10px;">account_balance_wallet</i>FinanControl</a>
      <a href="#" data-target="mobile-demo" class="sidenav-trigger"><i class="material-icons">menu</i></a>
      <ul class="right hide-on-med-and-down">
        <li><a wicket:id="dashboardLink" href="#">Dashboard</a></li>
        <li><a wicket:id="expensesLink" href="#">Expenses</a></li>
        <li><a wicket:id="incomesLink" href="#">Incomes</a></li>
        <li>
          <span class="white-text" style="margin-right: 15px;">
            <i class="material-icons left">person</i>
            <span wicket:id="username">User</span>
          </span>
        </li>
        <li><a wicket:id="logoutLink" href="/logout" class="btn pink accent-3 waves-effect waves-light">Logout</a></li>
      </ul>
    </div>
  </nav>

  <ul class="sidenav" id="mobile-demo">
    <li><a wicket:id="dashboardLinkMobile" href="#">Dashboard</a></li>
    <li><a wicket:id="expensesLinkMobile" href="#">Expenses</a></li>
    <li><a wicket:id="incomesLinkMobile" href="#">Incomes</a></li>
    <li>
      <div class="divider"></div>
    </li>
    <li><a wicket:id="logoutLinkMobile" href="/logout">Logout</a></li>
  </ul>

  <main class="container">
    <wicket:child />
  </main>
</body>

</html>